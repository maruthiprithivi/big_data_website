import React, { useState } from 'react';
import {
  Database, Inbox, Cpu, Activity, HardDrive, Zap,
  Globe, Cloud, GitMerge, LayoutDashboard, ScrollText,
  ChevronRight, Check, Sparkles, Info
} from 'lucide-react';

const BigDataArchitectureExplorer = () => {
  const [activeArchitecture, setActiveArchitecture] = useState('lambda');
  const [selectedComponent, setSelectedComponent] = useState(null);
  const [showDataFlow, setShowDataFlow] = useState(true);
  const [activeView, setActiveView] = useState('architectures'); // 'architectures' or 'resources'

  const iconComponents = {
    database: Database,
    queue: Inbox,
    cluster: Cpu,
    stream: Activity,
    warehouse: HardDrive,
    cache: Zap,
    api: Globe,
    cloud: Cloud,
    pipeline: GitMerge,
    dashboard: LayoutDashboard,
    log: ScrollText
  };

  const colorScheme = {
    database: { bg: 'rgba(59, 130, 246, 0.15)', border: '#60a5fa', icon: '#60a5fa', label: '#1e3a5f' },
    queue: { bg: 'rgba(139, 92, 246, 0.15)', border: '#8b5cf6', icon: '#8b5cf6', label: '#3b1f5e' },
    cluster: { bg: 'rgba(236, 72, 153, 0.15)', border: '#ec4899', icon: '#ec4899', label: '#5c1f4a' },
    stream: { bg: 'rgba(245, 158, 11, 0.15)', border: '#f59e0b', icon: '#f59e0b', label: '#5c3d1f' },
    warehouse: { bg: 'rgba(16, 185, 129, 0.15)', border: '#10b981', icon: '#10b981', label: '#1f4a3d' },
    cache: { bg: 'rgba(6, 182, 212, 0.15)', border: '#06b6d4', icon: '#06b6d4', label: '#1f4a5c' },
    api: { bg: 'rgba(168, 85, 247, 0.15)', border: '#a855f7', icon: '#a855f7', label: '#3d1f5c' },
    cloud: { bg: 'rgba(59, 130, 246, 0.15)', border: '#3b82f6', icon: '#3b82f6', label: '#1f2f5c' },
    pipeline: { bg: 'rgba(124, 58, 237, 0.15)', border: '#7c3aed', icon: '#7c3aed', label: '#2f1f5c' },
    dashboard: { bg: 'rgba(236, 72, 153, 0.15)', border: '#ec4899', icon: '#ec4899', label: '#5c1f4a' },
    log: { bg: 'rgba(59, 130, 246, 0.15)', border: '#3b82f6', icon: '#3b82f6', label: '#1f2f5c' }
  };

  const architectures = {
    lambda: {
      name: 'Lambda Architecture',
      difficulty: 'Advanced',
      tagline: 'Hybrid Batch + Stream Processing',
      description: 'Lambda Architecture decomposes the problem into three layers: batch layer for accuracy, speed layer for low latency, and serving layer for queries.',
      layout: 'lambda',
      overview: {
        text: 'Lambda Architecture decomposes the problem into three layers: batch layer for accuracy, speed layer for low latency, and serving layer for queries.',
        scenario: 'E-Commerce Platform - Amazon-Scale',
        scenarioDescription: 'A global e-commerce platform processes millions of customer interactions daily. User clickstreams, product views, purchases, and reviews flow continuously through data sources. The batch layer recalculates personalized product recommendations overnight using complete purchase history, while the speed layer updates trending products in real-time. The serving layer merges both views to show accurate historical trends alongside live flash sale metrics on customer dashboards.',
        components: [
          { name: 'Data Sources', metric: 'Customer clicks, purchases, reviews from web and mobile apps' },
          { name: 'Message Queue', metric: 'Kafka buffering millions of events during peak shopping hours' },
          { name: 'Batch Processing', metric: 'Nightly Spark jobs recalculating customer lifetime value and recommendations' },
          { name: 'Stream Processing', metric: 'Real-time fraud detection and trending product calculations' },
          { name: 'Data Warehouse', metric: 'Historical purchase patterns and product performance metrics' },
          { name: 'In-Memory Cache', metric: 'Hot product inventory and flash sale counters' },
          { name: 'API Gateway', metric: 'Serving personalized homepages and recommendation widgets' }
        ]
      },
      useCases: [
        'Real-time analytics dashboards',
        'Fraud detection systems',
        'Recommendation engines',
        'Social media feeds'
      ],
      advantages: [
        'Fault-tolerant through recomputation',
        'Handles both real-time and batch workloads',
        'Supports complex event processing',
        'Scalable architecture pattern'
      ],
      challenges: [
        'Complex to maintain two separate code paths',
        'Data synchronization between batch and speed layers',
        'Higher operational overhead',
        'Potential data inconsistencies during merging'
      ],
      learningResources: [
        { title: 'Microsoft Learn: Big Data Architectures Guide', url: 'https://learn.microsoft.com/en-us/azure/architecture/databases/guide/big-data-architectures' },
        { title: 'AWS Blog: Build Lambda Architecture for Batch and Real-time Analytics', url: 'https://aws.amazon.com/blogs/big-data/build-a-big-data-lambda-architecture-for-batch-and-real-time-analytics-using-amazon-redshift/' },
        { title: 'Confluent: Apache Flink Complete Introduction (Free Course)', url: 'https://developer.confluent.io/courses/apache-flink/intro/' }
      ],
      components: [
        { id: 'source', name: 'Data Sources', shape: 'database', description: 'Multiple database sources', details: 'Operational databases, data lakes, and external APIs generating continuous data streams.', technologies: ['PostgreSQL', 'MongoDB', 'S3', 'APIs'] },
        { id: 'ingestion', name: 'Message Queue', shape: 'queue', description: 'Distributed message broker', details: 'Durable event log with partitioning, ordering, and replay capabilities.', technologies: ['Kafka', 'Kinesis', 'Pulsar'] },
        { id: 'batch', name: 'Batch Layer', shape: 'cluster', description: 'Batch compute cluster', details: 'Distributed processing of complete historical datasets with MapReduce.', technologies: ['Spark', 'Hadoop', 'EMR'] },
        { id: 'batch-storage', name: 'Batch Views', shape: 'warehouse', description: 'Data warehouse', details: 'Columnar OLAP database for analytical queries.', technologies: ['Snowflake', 'BigQuery', 'ClickHouse'] },
        { id: 'speed', name: 'Speed Layer', shape: 'stream', description: 'Stream processor', details: 'Real-time stateful processing with windowing and aggregations.', technologies: ['Flink', 'Storm', 'Kafka Streams'] },
        { id: 'speed-storage', name: 'Real-time Views', shape: 'cache', description: 'In-memory cache', details: 'Low-latency key-value store for hot data.', technologies: ['Redis', 'Memcached'] },
        { id: 'serving', name: 'Serving Layer', shape: 'api', description: 'Query interface', details: 'Unified API merging batch and real-time views.', technologies: ['Druid', 'GraphQL', 'REST'] }
      ],
      connections: [
        { from: 'source', to: 'ingestion', type: 'stream' },
        { from: 'ingestion', to: 'batch', type: 'batch' },
        { from: 'ingestion', to: 'speed', type: 'stream' },
        { from: 'batch', to: 'batch-storage', type: 'batch' },
        { from: 'speed', to: 'speed-storage', type: 'stream' },
        { from: 'batch-storage', to: 'serving', type: 'query' },
        { from: 'speed-storage', to: 'serving', type: 'query' }
      ]
    },
    kappa: {
      name: 'Kappa Architecture',
      difficulty: 'Intermediate',
      tagline: 'Stream-First Simplicity',
      description: 'Kappa Architecture simplifies Lambda by using only a stream processing layer with a replayable event log.',
      layout: 'linear',
      overview: {
        text: 'Kappa Architecture simplifies Lambda by using only a stream processing layer with a replayable event log, eliminating the batch layer complexity.',
        scenario: 'IoT Smart City Platform',
        scenarioDescription: 'A smart city platform collects sensor data from traffic lights, air quality monitors, and public transit vehicles. All events are stored in an infinite event log (Kafka) allowing the system to replay historical data when deploying new analytics algorithms. Stream processors continuously calculate traffic congestion patterns, pollution levels, and transit delays. Materialized views maintain pre-computed metrics that power real-time dashboards for city planners and public mobile apps.',
        components: [
          { name: 'Event Log', metric: 'Infinite Kafka topics storing years of sensor readings for replay and reprocessing' },
          { name: 'Stream Application', metric: 'Flink jobs processing GPS coordinates, temperature, and traffic flow data' },
          { name: 'Materialized Views', metric: 'Live dashboards showing current congestion, air quality index, and transit status' },
          { name: 'Query API', metric: 'REST endpoints serving city planners and citizen mobile applications' }
        ]
      },
      useCases: [
        'Event-driven microservices',
        'Real-time data pipelines',
        'Stream analytics platforms',
        'IoT data processing'
      ],
      advantages: [
        'Simpler architecture with single processing path',
        'Replayable event log for reprocessing',
        'Lower operational complexity',
        'True streaming-first approach'
      ],
      challenges: [
        'Requires infinite event log retention',
        'Reprocessing can be time-consuming',
        'Limited support for complex batch analytics',
        'State management complexity'
      ],
      learningResources: [
        { title: 'Medium: Free Apache Kafka Resources for Beginners 2024', url: 'https://medium.com/confluent/7-more-free-awesome-apache-kafka-resources-for-beginners-2024-6f7581e9a613' },
        { title: 'RisingWave: Hands-On Tutorial for Apache Kafka Stream Processing', url: 'https://risingwave.com/blog/hands-on-tutorial-for-apache-kafka-stream-processing/' },
        { title: 'Official Apache Flink Documentation: Learn Flink', url: 'https://nightlies.apache.org/flink/flink-docs-stable/docs/learn-flink/overview/' }
      ],
      components: [
        { id: 'event-log', name: 'Event Log', shape: 'log', description: 'Immutable log', details: 'Append-only event log with infinite retention.', technologies: ['Kafka', 'Pulsar'] },
        { id: 'stream-app', name: 'Stream Application', shape: 'stream', description: 'Unified processor', details: 'Single processing layer for all time ranges.', technologies: ['Flink', 'ksqlDB'] },
        { id: 'materialized', name: 'Materialized Views', shape: 'warehouse', description: 'Live query results', details: 'Continuously updated precomputed views.', technologies: ['Materialize', 'RisingWave'] },
        { id: 'api', name: 'Query API', shape: 'api', description: 'Serving layer', details: 'Real-time query interface.', technologies: ['GraphQL', 'REST'] }
      ],
      connections: [
        { from: 'event-log', to: 'stream-app', type: 'stream' },
        { from: 'stream-app', to: 'materialized', type: 'stream' },
        { from: 'materialized', to: 'api', type: 'query' }
      ]
    },
    streaming: {
      name: 'Streaming Architecture',
      difficulty: 'Intermediate',
      tagline: 'Pure Real-Time Processing',
      description: 'Event-driven architecture for continuous low-latency processing with stream-first approach.',
      layout: 'linear',
      overview: {
        text: 'Pure streaming architecture for real-time event processing with continuous data flows and minimal latency.',
        scenario: 'Ride-Sharing Platform - Uber/Lyft',
        scenarioDescription: 'A ride-sharing platform requires sub-second latency for matching riders with drivers. Mobile apps continuously emit location updates, ride requests, and driver availability events. Stream processors calculate real-time surge pricing based on supply-demand ratios, estimate arrival times using current traffic conditions, and detect anomalies like GPS spoofing. Results flow directly to live rider and driver apps with minimal delay, while operational metrics stream to monitoring dashboards.',
        components: [
          { name: 'Event Producers', metric: 'Mobile apps emitting GPS pings, ride requests, and trip status updates' },
          { name: 'Stream Broker', metric: 'Kafka handling location streams from millions of active drivers and riders' },
          { name: 'Stream Processor', metric: 'Kafka Streams calculating surge zones, ETAs, and driver-rider matching' },
          { name: 'Data Sinks', metric: 'Real-time updates pushed to mobile apps and operations dashboards via WebSockets' }
        ]
      },
      useCases: [
        'Real-time monitoring systems',
        'Live dashboards and metrics',
        'Anomaly detection',
        'Log aggregation and analysis'
      ],
      advantages: [
        'Minimal latency for data processing',
        'Simplified architecture',
        'Easy to scale horizontally',
        'Native support for event time processing'
      ],
      challenges: [
        'Limited historical data analysis',
        'State management complexity',
        'Requires careful backpressure handling',
        'Testing and debugging difficulty'
      ],
      learningResources: [
        { title: 'Ververica: Stream Processing with Apache Flink Beginner Guide 2025', url: 'https://www.ververica.com/stream-processing-with-apache-flink-beginners-guide' },
        { title: 'DataCamp: Kafka Streams Tutorial for Real-Time Data Processing', url: 'https://www.datacamp.com/tutorial/kafka-streams-tutorial' },
        { title: 'InfoQ: Event-Driven Architecture (Free Resources)', url: 'https://www.infoq.com/eventdrivenarchitecture/' }
      ],
      components: [
        { id: 'producers', name: 'Event Producers', shape: 'database', description: 'Event sources', details: 'Microservices and IoT devices emitting events.', technologies: ['Microservices', 'IoT', 'APIs'] },
        { id: 'broker', name: 'Stream Broker', shape: 'queue', description: 'Event backbone', details: 'Distributed log for event streaming.', technologies: ['Kafka', 'Pulsar'] },
        { id: 'processor', name: 'Stream Processor', shape: 'stream', description: 'Real-time compute', details: 'Stateful stream processing with windowing.', technologies: ['Flink', 'Kafka Streams'] },
        { id: 'sink', name: 'Data Sinks', shape: 'warehouse', description: 'Output targets', details: 'Materialized streaming results.', technologies: ['ClickHouse', 'S3'] }
      ],
      connections: [
        { from: 'producers', to: 'broker', type: 'stream' },
        { from: 'broker', to: 'processor', type: 'stream' },
        { from: 'processor', to: 'sink', type: 'stream' }
      ]
    },
    batch: {
      name: 'Batch Architecture',
      difficulty: 'Beginner',
      tagline: 'Traditional ETL Processing',
      description: 'Scheduled batch processing for data warehousing with periodic ETL jobs and analytical workloads.',
      layout: 'linear',
      overview: {
        text: 'Traditional batch processing architecture with scheduled ETL workflows for data warehousing and business intelligence.',
        scenario: 'Retail Chain Analytics - Walmart/Target',
        scenarioDescription: 'A national retail chain with thousands of stores runs nightly batch processes to consolidate sales data. Point-of-sale systems upload daily transaction logs to a central data lake. Overnight ETL pipelines clean, transform, and aggregate data - calculating store performance metrics, regional sales trends, and inventory turnover rates. The data warehouse powers morning executive dashboards and enables business analysts to create custom reports for merchandising decisions and quarterly forecasting.',
        components: [
          { name: 'Source Systems', metric: 'Nightly extracts from thousands of store POS systems and inventory databases' },
          { name: 'Data Lake', metric: 'Raw transaction logs, product catalogs, and customer loyalty program data' },
          { name: 'ETL Pipeline', metric: 'Airflow DAGs running hourly/daily to transform and aggregate sales metrics' },
          { name: 'Data Warehouse', metric: 'Snowflake storing historical sales, products, and customer dimensions' },
          { name: 'BI Tools', metric: 'Tableau dashboards for executives, managers, and business analysts' }
        ]
      },
      useCases: [
        'Business intelligence and reporting',
        'Data warehouse consolidation',
        'Historical trend analysis',
        'Regulatory compliance reporting'
      ],
      advantages: [
        'Well-established patterns and tools',
        'Excellent for complex transformations',
        'Optimized for analytical queries',
        'Strong consistency guarantees'
      ],
      challenges: [
        'High latency for fresh data',
        'Resource-intensive batch jobs',
        'Scheduling complexity',
        'Limited real-time capabilities'
      ],
      learningResources: [
        { title: 'GitHub: Awesome Apache Spark (Curated Learning Resources)', url: 'https://github.com/awesome-spark/awesome-spark' },
        { title: 'Spark By Examples: Comprehensive Tutorials with Code', url: 'https://sparkbyexamples.com/' },
        { title: 'AWS: Batch Processing Gateway on EMR (Practical Example)', url: 'https://github.com/aws-samples/batch-processing-gateway-on-emr-on-eks' }
      ],
      components: [
        { id: 'sources', name: 'Source Systems', shape: 'database', description: 'OLTP databases', details: 'Operational databases and business systems.', technologies: ['PostgreSQL', 'MySQL', 'Oracle'] },
        { id: 'data-lake', name: 'Data Lake', shape: 'cloud', description: 'Raw data storage', details: 'Object storage for unstructured data.', technologies: ['S3', 'ADLS', 'GCS'] },
        { id: 'etl', name: 'ETL Pipeline', shape: 'pipeline', description: 'Transformation layer', details: 'Extract, transform, and load workflows.', technologies: ['Airflow', 'dbt', 'Glue'] },
        { id: 'warehouse', name: 'Data Warehouse', shape: 'warehouse', description: 'OLAP storage', details: 'Structured analytical database.', technologies: ['Snowflake', 'Redshift'] },
        { id: 'bi', name: 'BI Tools', shape: 'dashboard', description: 'Analytics layer', details: 'Dashboards and reporting tools.', technologies: ['Tableau', 'Power BI', 'Looker'] }
      ],
      connections: [
        { from: 'sources', to: 'data-lake', type: 'batch' },
        { from: 'data-lake', to: 'etl', type: 'batch' },
        { from: 'etl', to: 'warehouse', type: 'batch' },
        { from: 'warehouse', to: 'bi', type: 'query' }
      ]
    }
  };

  const connectionColors = {
    stream: '#f59e0b',
    batch: '#ec4899',
    query: '#10b981'
  };

  const currentArch = architectures[activeArchitecture];

  const ComponentCard = ({ component, onClick }) => {
    const colors = colorScheme[component.shape] || colorScheme.database;
    const Icon = iconComponents[component.shape];

    return (
      <div
        onClick={() => onClick(component)}
        style={{
          background: colors.bg,
          border: `2px solid ${colors.border}`,
          borderRadius: '16px',
          padding: '20px',
          minWidth: '180px',
          maxWidth: '180px',
          minHeight: '180px',
          maxHeight: '180px',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          gap: '16px',
          cursor: 'pointer',
          transition: 'all 0.3s',
          boxShadow: `0 0 20px ${colors.border}33`
        }}
        onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}
        onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
      >
        <div
          style={{
            width: '80px',
            height: '80px',
            borderRadius: '16px',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            background: `${colors.border}22`,
            border: `1px solid ${colors.border}44`
          }}
        >
          <Icon size={44} color={colors.icon} strokeWidth={1.5} />
        </div>
        <div
          style={{
            background: colors.label,
            color: 'white',
            padding: '8px 16px',
            borderRadius: '8px',
            fontSize: '13px',
            fontWeight: '600',
            textAlign: 'center',
            width: '100%',
            border: `1px solid ${colors.border}66`
          }}
        >
          {component.name}
        </div>
      </div>
    );
  };

  const ConnectionArrow = ({ type }) => {
    const color = connectionColors[type] || '#60a5fa';

    return (
      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '0 8px', minWidth: '80px', height: '180px' }}>
        <div style={{ display: 'flex', alignItems: 'center', gap: '4px', color }}>
          <div style={{
            width: '60px',
            height: '2px',
            background: `linear-gradient(90deg, transparent, ${color}, ${color})`,
            position: 'relative'
          }}>
            {showDataFlow && (
              <div
                style={{
                  position: 'absolute',
                  width: '10px',
                  height: '10px',
                  borderRadius: '50%',
                  background: color,
                  boxShadow: `0 0 12px ${color}`,
                  animation: 'flowRight 1.5s infinite linear',
                  top: '-4px'
                }}
              />
            )}
          </div>
          <ChevronRight size={18} />
        </div>
      </div>
    );
  };

  const VerticalConnectionArrow = ({ type, direction = 'down' }) => {
    const color = connectionColors[type] || '#60a5fa';
    const rotation = direction === 'down' ? 'rotate(90deg)' : 'rotate(-90deg)';

    return (
      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '8px 0', minHeight: '80px', width: '180px' }}>
        <div style={{ display: 'flex', alignItems: 'center', gap: '4px', color, transform: rotation }}>
          <div style={{
            width: '60px',
            height: '2px',
            background: `linear-gradient(90deg, transparent, ${color}, ${color})`,
            position: 'relative'
          }}>
            {showDataFlow && (
              <div
                style={{
                  position: 'absolute',
                  width: '10px',
                  height: '10px',
                  borderRadius: '50%',
                  background: color,
                  boxShadow: `0 0 12px ${color}`,
                  animation: 'flowRight 1.5s infinite linear',
                  top: '-4px'
                }}
              />
            )}
          </div>
          <ChevronRight size={18} />
        </div>
      </div>
    );
  };

  const renderLambdaLayout = () => {
    const comps = currentArch.components;
    const source = comps.find(c => c.id === 'source');
    const ingestion = comps.find(c => c.id === 'ingestion');
    const batch = comps.find(c => c.id === 'batch');
    const speed = comps.find(c => c.id === 'speed');
    const batchStorage = comps.find(c => c.id === 'batch-storage');
    const speedStorage = comps.find(c => c.id === 'speed-storage');
    const serving = comps.find(c => c.id === 'serving');

    return (
      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '0px' }}>
        {/* Top Row - Batch Layer */}
        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
          <div style={{ width: '180px' }}></div>
          <div style={{ width: '96px', minWidth: '96px' }}></div>
          <ComponentCard component={batch} onClick={setSelectedComponent} />
          <ConnectionArrow type="batch" />
          <ComponentCard component={batchStorage} onClick={setSelectedComponent} />
        </div>

        {/* Vertical connectors: Message Queue to Batch, Batch Views to Serving */}
        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
          <div style={{ width: '180px' }}></div>
          <div style={{ width: '96px', minWidth: '96px' }}></div>
          <VerticalConnectionArrow type="batch" direction="up" />
          <div style={{ width: '96px', minWidth: '96px' }}></div>
          <VerticalConnectionArrow type="query" direction="down" />
        </div>

        {/* Middle Row - Source & Ingestion & Serving */}
        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
          <ComponentCard component={source} onClick={setSelectedComponent} />
          <ConnectionArrow type="stream" />
          <ComponentCard component={ingestion} onClick={setSelectedComponent} />
          <div style={{ width: '96px', minWidth: '96px' }}></div>
          <ComponentCard component={serving} onClick={setSelectedComponent} />
        </div>

        {/* Vertical connectors: Message Queue to Speed, Real-time Views to Serving */}
        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
          <div style={{ width: '180px' }}></div>
          <div style={{ width: '96px', minWidth: '96px' }}></div>
          <VerticalConnectionArrow type="stream" direction="down" />
          <div style={{ width: '96px', minWidth: '96px' }}></div>
          <VerticalConnectionArrow type="query" direction="up" />
        </div>

        {/* Bottom Row - Speed Layer */}
        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
          <div style={{ width: '180px' }}></div>
          <div style={{ width: '96px', minWidth: '96px' }}></div>
          <ComponentCard component={speed} onClick={setSelectedComponent} />
          <ConnectionArrow type="stream" />
          <ComponentCard component={speedStorage} onClick={setSelectedComponent} />
        </div>
      </div>
    );
  };

  const renderLinearLayout = () => {
    return (
      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', flexWrap: 'wrap', gap: '8px' }}>
        {currentArch.components.map((comp, idx) => (
          <React.Fragment key={comp.id}>
            <ComponentCard component={comp} onClick={setSelectedComponent} />
            {idx < currentArch.components.length - 1 && (
              <ConnectionArrow type={currentArch.connections[idx]?.type || 'stream'} />
            )}
          </React.Fragment>
        ))}
      </div>
    );
  };

  return (
    <div style={{ minHeight: '100vh', background: '#0a0a0f', color: '#ffffff' }}>
      <style>{`
        @keyframes flowRight {
          0% { left: 0; opacity: 0; }
          10% { opacity: 1; }
          90% { opacity: 1; }
          100% { left: calc(100% - 10px); opacity: 0; }
        }
      `}</style>

      <div style={{ padding: '32px' }}>
        <div style={{ maxWidth: '1600px', margin: '0 auto' }}>
          <div style={{ marginBottom: '32px' }}>
            <h1 style={{ fontSize: '36px', fontWeight: 'bold', marginBottom: '8px' }}>
              Big Data Architecture Explorer
            </h1>
            <p style={{ color: '#94a3b8', fontSize: '16px' }}>
              Interactive 2D visualization of data engineering patterns
            </p>
          </div>

          {/* Main Navigation */}
          <div style={{ display: 'flex', gap: '12px', marginBottom: '24px', borderBottom: '2px solid rgba(71, 85, 105, 0.3)', paddingBottom: '16px' }}>
            <button
              onClick={() => setActiveView('architectures')}
              style={{
                padding: '12px 32px',
                background: activeView === 'architectures' ? 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' : 'transparent',
                border: 'none',
                borderBottom: activeView === 'architectures' ? '3px solid #60a5fa' : '3px solid transparent',
                color: activeView === 'architectures' ? '#ffffff' : '#94a3b8',
                fontSize: '16px',
                fontWeight: '600',
                cursor: 'pointer',
                transition: 'all 0.3s',
                borderRadius: '8px 8px 0 0'
              }}
              onMouseEnter={(e) => {
                if (activeView !== 'architectures') {
                  e.currentTarget.style.color = '#cbd5e1';
                }
              }}
              onMouseLeave={(e) => {
                if (activeView !== 'architectures') {
                  e.currentTarget.style.color = '#94a3b8';
                }
              }}
            >
              Architectures
            </button>
            <button
              onClick={() => setActiveView('resources')}
              style={{
                padding: '12px 32px',
                background: activeView === 'resources' ? 'linear-gradient(135deg, #a78bfa 0%, #7c3aed 100%)' : 'transparent',
                border: 'none',
                borderBottom: activeView === 'resources' ? '3px solid #a78bfa' : '3px solid transparent',
                color: activeView === 'resources' ? '#ffffff' : '#94a3b8',
                fontSize: '16px',
                fontWeight: '600',
                cursor: 'pointer',
                transition: 'all 0.3s',
                borderRadius: '8px 8px 0 0'
              }}
              onMouseEnter={(e) => {
                if (activeView !== 'resources') {
                  e.currentTarget.style.color = '#cbd5e1';
                }
              }}
              onMouseLeave={(e) => {
                if (activeView !== 'resources') {
                  e.currentTarget.style.color = '#94a3b8';
                }
              }}
            >
              Learning Resources
            </button>
          </div>

          {activeView === 'architectures' && (
            <>
          <div style={{ display: 'flex', gap: '8px', marginBottom: '24px', flexWrap: 'wrap' }}>
            {Object.keys(architectures).map(key => (
              <button
                key={key}
                onClick={() => {
                  setActiveArchitecture(key);
                  setSelectedComponent(null);
                }}
                style={{
                  padding: '12px 24px',
                  background: activeArchitecture === key
                    ? 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)'
                    : 'rgba(30, 41, 59, 0.6)',
                  border: activeArchitecture === key ? '2px solid #60a5fa' : '1px solid rgba(71, 85, 105, 0.3)',
                  borderRadius: '8px',
                  color: '#ffffff',
                  fontSize: '14px',
                  fontWeight: '600',
                  cursor: 'pointer',
                  transition: 'all 0.3s',
                  backdropFilter: 'blur(10px)'
                }}
                onMouseEnter={(e) => {
                  if (activeArchitecture !== key) {
                    e.currentTarget.style.background = 'rgba(30, 41, 59, 0.8)';
                  }
                }}
                onMouseLeave={(e) => {
                  if (activeArchitecture !== key) {
                    e.currentTarget.style.background = 'rgba(30, 41, 59, 0.6)';
                  }
                }}
              >
                {architectures[key].name}
              </button>
            ))}
          </div>

          <div
            style={{
              background: 'rgba(15, 23, 42, 0.8)',
              backdropFilter: 'blur(20px)',
              border: '1px solid rgba(71, 85, 105, 0.3)',
              borderRadius: '12px',
              padding: '20px',
              marginBottom: '24px'
            }}
          >
            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', flexWrap: 'wrap', gap: '16px' }}>
              <div>
                <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '4px' }}>
                  <h2 style={{ fontSize: '24px', fontWeight: 'bold' }}>
                    {currentArch.name}
                  </h2>
                  <span style={{
                    padding: '4px 12px',
                    borderRadius: '6px',
                    fontSize: '12px',
                    fontWeight: '600',
                    background: currentArch.difficulty === 'Beginner' ? 'rgba(34, 197, 94, 0.2)' :
                                currentArch.difficulty === 'Intermediate' ? 'rgba(59, 130, 246, 0.2)' :
                                'rgba(239, 68, 68, 0.2)',
                    color: currentArch.difficulty === 'Beginner' ? '#22c55e' :
                           currentArch.difficulty === 'Intermediate' ? '#3b82f6' :
                           '#ef4444',
                    border: `1px solid ${currentArch.difficulty === 'Beginner' ? '#22c55e' :
                                         currentArch.difficulty === 'Intermediate' ? '#3b82f6' :
                                         '#ef4444'}`
                  }}>
                    {currentArch.difficulty}
                  </span>
                </div>
                <p style={{ color: '#94a3b8', fontSize: '14px', marginBottom: '8px' }}>
                  {currentArch.tagline}
                </p>
                <p style={{ color: '#cbd5e1', fontSize: '14px' }}>
                  {currentArch.description}
                </p>
              </div>
              <button
                onClick={() => setShowDataFlow(!showDataFlow)}
                style={{
                  padding: '10px 20px',
                  background: 'rgba(30, 41, 59, 0.6)',
                  border: '1px solid rgba(71, 85, 105, 0.3)',
                  borderRadius: '8px',
                  color: '#ffffff',
                  fontSize: '14px',
                  fontWeight: '600',
                  cursor: 'pointer',
                  display: 'flex',
                  alignItems: 'center',
                  gap: '8px',
                  transition: 'all 0.3s'
                }}
                onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(30, 41, 59, 0.8)'}
                onMouseLeave={(e) => e.currentTarget.style.background = 'rgba(30, 41, 59, 0.6)'}
              >
                <Sparkles size={18} />
                <span>Data Flow {showDataFlow ? 'ON' : 'OFF'}</span>
              </button>
            </div>
          </div>

          <div
            style={{
              background: 'rgba(15, 23, 42, 0.9)',
              backdropFilter: 'blur(20px)',
              border: '1px solid rgba(71, 85, 105, 0.3)',
              borderRadius: '12px',
              padding: '16px 24px',
              marginBottom: '24px'
            }}
          >
            <div style={{ display: 'flex', alignItems: 'center', gap: '32px', flexWrap: 'wrap' }}>
              <span style={{ color: '#94a3b8', fontSize: '14px', fontWeight: '600' }}>
                Connection Types:
              </span>
              {Object.entries(connectionColors).map(([type, color]) => (
                <div key={type} style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                  <div style={{
                    width: '32px',
                    height: '3px',
                    background: color,
                    borderRadius: '2px'
                  }} />
                  <span style={{ color: '#e2e8f0', fontSize: '14px', textTransform: 'capitalize' }}>
                    {type}
                  </span>
                </div>
              ))}
            </div>
          </div>
          </>
          )}

          {activeView === 'resources' && (
            <>
          <div
            style={{
              background: 'rgba(15, 23, 42, 0.8)',
              backdropFilter: 'blur(20px)',
              border: '1px solid rgba(71, 85, 105, 0.3)',
              borderRadius: '12px',
              padding: '24px',
              marginBottom: '24px',
              overflowX: 'auto'
            }}
          >
            <h3 style={{ fontSize: '20px', fontWeight: 'bold', marginBottom: '16px', color: '#60a5fa' }}>
              Architecture Comparison
            </h3>
            <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '14px' }}>
              <thead>
                <tr>
                  <th style={{ padding: '12px', textAlign: 'left', color: '#94a3b8', borderBottom: '2px solid rgba(71, 85, 105, 0.5)', fontWeight: '600' }}>Feature</th>
                  <th style={{ padding: '12px', textAlign: 'left', color: '#ec4899', borderBottom: '2px solid rgba(71, 85, 105, 0.5)', fontWeight: '600' }}>Lambda</th>
                  <th style={{ padding: '12px', textAlign: 'left', color: '#8b5cf6', borderBottom: '2px solid rgba(71, 85, 105, 0.5)', fontWeight: '600' }}>Kappa</th>
                  <th style={{ padding: '12px', textAlign: 'left', color: '#f59e0b', borderBottom: '2px solid rgba(71, 85, 105, 0.5)', fontWeight: '600' }}>Streaming</th>
                  <th style={{ padding: '12px', textAlign: 'left', color: '#10b981', borderBottom: '2px solid rgba(71, 85, 105, 0.5)', fontWeight: '600' }}>Batch</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Difficulty</td>
                  <td style={{ padding: '10px 12px', color: '#ef4444', borderBottom: '1px solid rgba(71, 85, 105, 0.3)', fontWeight: '600' }}>Advanced</td>
                  <td style={{ padding: '10px 12px', color: '#3b82f6', borderBottom: '1px solid rgba(71, 85, 105, 0.3)', fontWeight: '600' }}>Intermediate</td>
                  <td style={{ padding: '10px 12px', color: '#3b82f6', borderBottom: '1px solid rgba(71, 85, 105, 0.3)', fontWeight: '600' }}>Intermediate</td>
                  <td style={{ padding: '10px 12px', color: '#22c55e', borderBottom: '1px solid rgba(71, 85, 105, 0.3)', fontWeight: '600' }}>Beginner</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Complexity</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>High</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Medium</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Low</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Low</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Real-time Support</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Yes</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Yes</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Yes</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>No</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Data Consistency</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>High</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Medium</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Medium</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>High</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Latency</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Low (speed layer)</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Low</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Very Low</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>High (hours/days)</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Processing Layers</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Batch + Speed + Serving</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Stream only</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Stream only</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Batch only</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Data Reprocessing</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Easy (batch layer)</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Possible (replay log)</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Limited</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Easy (re-run ETL)</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Operational Overhead</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>High</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Medium</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Low</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1', borderBottom: '1px solid rgba(71, 85, 105, 0.3)' }}>Low</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px 12px', color: '#94a3b8' }}>Best For</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1' }}>Mission-critical systems needing both accuracy and speed</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1' }}>Event-driven systems with replay requirements</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1' }}>Real-time applications with minimal latency needs</td>
                  <td style={{ padding: '10px 12px', color: '#cbd5e1' }}>Reporting, analytics, and historical insights</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div
            style={{
              background: 'rgba(15, 23, 42, 0.4)',
              backdropFilter: 'blur(10px)',
              border: '1px solid rgba(71, 85, 105, 0.3)',
              borderRadius: '12px',
              padding: '60px 40px',
              marginBottom: '24px',
              minHeight: '500px'
            }}
          >
            {currentArch.layout === 'lambda' ? renderLambdaLayout() : renderLinearLayout()}

            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '8px',
              color: '#94a3b8',
              fontSize: '12px',
              marginTop: '48px',
              paddingTop: '24px',
              borderTop: '1px solid rgba(71, 85, 105, 0.3)',
              justifyContent: 'center'
            }}>
              <Info size={16} />
              <span>Click on any component to view details</span>
            </div>
          </div>

          <div
            style={{
              background: 'rgba(15, 23, 42, 0.6)',
              backdropFilter: 'blur(20px)',
              border: '1px solid rgba(71, 85, 105, 0.3)',
              borderRadius: '12px',
              padding: '32px',
              marginBottom: '24px'
            }}
          >
            <div style={{ marginBottom: '32px' }}>
              <h3 style={{
                fontSize: '24px',
                fontWeight: 'bold',
                marginBottom: '16px',
                color: '#60a5fa'
              }}>
                Overview
              </h3>
              <p style={{ color: '#cbd5e1', fontSize: '15px', lineHeight: '1.6', marginBottom: '20px' }}>
                {currentArch.overview.text}
              </p>

              <div style={{
                background: 'rgba(59, 130, 246, 0.1)',
                border: '1px solid rgba(59, 130, 246, 0.3)',
                borderRadius: '12px',
                padding: '20px',
                marginBottom: '20px'
              }}>
                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '12px' }}>
                  <Sparkles size={20} color="#60a5fa" />
                  <h4 style={{ fontSize: '16px', fontWeight: '600', color: '#60a5fa' }}>
                    Example Scenario: {currentArch.overview.scenario}
                  </h4>
                </div>
                <p style={{ color: '#cbd5e1', fontSize: '14px', lineHeight: '1.7', marginBottom: '8px' }}>
                  {currentArch.overview.scenarioDescription}
                </p>
                <p style={{ color: '#94a3b8', fontSize: '12px', fontStyle: 'italic' }}>
                  Note: This is a fictional example based on patterns observed in the market to illustrate real-world applications.
                </p>
              </div>

              <h4 style={{ fontSize: '16px', fontWeight: '600', color: '#e2e8f0', marginBottom: '12px' }}>
                Components in This Scenario
              </h4>
              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))', gap: '12px' }}>
                {currentArch.overview.components.map((comp, idx) => (
                  <div
                    key={idx}
                    style={{
                      background: 'rgba(30, 41, 59, 0.6)',
                      border: '1px solid rgba(59, 130, 246, 0.3)',
                      borderRadius: '8px',
                      padding: '12px 16px'
                    }}
                  >
                    <div style={{ fontSize: '13px', fontWeight: '600', color: '#e2e8f0', marginBottom: '4px' }}>
                      {comp.name}
                    </div>
                    <div style={{ fontSize: '12px', color: '#94a3b8', lineHeight: '1.5' }}>
                      {comp.metric}
                    </div>
                  </div>
                ))}
              </div>
            </div>

            <div style={{ marginBottom: '32px' }}>
              <h3 style={{
                fontSize: '24px',
                fontWeight: 'bold',
                marginBottom: '16px',
                color: '#a78bfa'
              }}>
                Use Cases
              </h3>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                {currentArch.useCases.map((useCase, idx) => (
                  <div key={idx} style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                    <ChevronRight size={18} color="#a78bfa" />
                    <span style={{ color: '#cbd5e1', fontSize: '15px' }}>{useCase}</span>
                  </div>
                ))}
              </div>
            </div>

            <div style={{ marginBottom: '32px' }}>
              <h3 style={{
                fontSize: '24px',
                fontWeight: 'bold',
                marginBottom: '16px',
                color: '#34d399'
              }}>
                Advantages
              </h3>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                {currentArch.advantages.map((advantage, idx) => (
                  <div key={idx} style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                    <Check size={18} color="#34d399" />
                    <span style={{ color: '#cbd5e1', fontSize: '15px' }}>{advantage}</span>
                  </div>
                ))}
              </div>
            </div>

            <div style={{ marginBottom: '32px' }}>
              <h3 style={{
                fontSize: '24px',
                fontWeight: 'bold',
                marginBottom: '16px',
                color: '#fbbf24'
              }}>
                Challenges
              </h3>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                {currentArch.challenges.map((challenge, idx) => (
                  <div key={idx} style={{ display: 'flex', alignItems: 'flex-start', gap: '12px' }}>
                    <div style={{
                      marginTop: '4px',
                      width: '6px',
                      height: '6px',
                      borderRadius: '50%',
                      background: '#fbbf24',
                      flexShrink: 0
                    }} />
                    <span style={{ color: '#cbd5e1', fontSize: '15px' }}>{challenge}</span>
                  </div>
                ))}
              </div>
            </div>

            <div>
              <h3 style={{
                fontSize: '24px',
                fontWeight: 'bold',
                marginBottom: '16px',
                color: '#f472b6'
              }}>
                Learning Resources
              </h3>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                {currentArch.learningResources.map((resource, idx) => (
                  <div key={idx} style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                    <div style={{
                      width: '20px',
                      height: '20px',
                      borderRadius: '4px',
                      background: 'rgba(244, 114, 182, 0.2)',
                      border: '1px solid #f472b6',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      flexShrink: 0,
                      fontSize: '11px',
                      fontWeight: '600',
                      color: '#f472b6'
                    }}>
                      {idx + 1}
                    </div>
                    <a
                      href={resource.url}
                      target="_blank"
                      rel="noopener noreferrer"
                      style={{
                        color: '#cbd5e1',
                        fontSize: '15px',
                        textDecoration: 'none',
                        borderBottom: '1px solid #f472b644',
                        transition: 'all 0.2s'
                      }}
                      onMouseEnter={(e) => {
                        e.currentTarget.style.color = '#f472b6';
                        e.currentTarget.style.borderBottom = '1px solid #f472b6';
                      }}
                      onMouseLeave={(e) => {
                        e.currentTarget.style.color = '#cbd5e1';
                        e.currentTarget.style.borderBottom = '1px solid #f472b644';
                      }}
                    >
                      {resource.title}
                    </a>
                  </div>
                ))}
              </div>
            </div>
          </div>

          <div
            style={{
              background: 'rgba(15, 23, 42, 0.6)',
              backdropFilter: 'blur(20px)',
              border: '1px solid rgba(71, 85, 105, 0.3)',
              borderRadius: '12px',
              padding: '32px',
              marginBottom: '24px'
            }}
          >
            <h3 style={{
              fontSize: '24px',
              fontWeight: 'bold',
              marginBottom: '16px',
              color: '#fbbf24'
            }}>
              Technical Glossary
            </h3>
            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '16px' }}>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>OLAP</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Online Analytical Processing - Database optimized for complex queries and analytics on large datasets.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>OLTP</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Online Transaction Processing - Database optimized for high-volume transactions and data modifications.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>ETL</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Extract, Transform, Load - Process of extracting data from sources, transforming it, and loading into a data warehouse.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>Stateful Processing</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Stream processing that maintains state across events, enabling windowing, aggregations, and joins.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>MapReduce</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Programming model for processing large datasets in parallel across distributed clusters.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>Event Log</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Immutable, append-only sequence of events that can be replayed for reprocessing.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>Materialized View</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Pre-computed query results stored for fast retrieval, continuously updated from source data.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>Partitioning</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Dividing data across multiple nodes for parallel processing and scalability.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>Backpressure</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Flow control mechanism to prevent overwhelming downstream systems when data arrives faster than it can be processed.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>Data Lake</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Centralized repository for storing raw, unstructured data at scale in its native format.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>Windowing</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Grouping stream events into finite time or count-based windows for aggregation.</p>
              </div>
              <div style={{ background: 'rgba(30, 41, 59, 0.6)', borderRadius: '8px', padding: '16px', border: '1px solid rgba(71, 85, 105, 0.3)' }}>
                <h4 style={{ color: '#60a5fa', fontSize: '15px', fontWeight: '600', marginBottom: '6px' }}>Columnar Storage</h4>
                <p style={{ color: '#cbd5e1', fontSize: '13px', lineHeight: '1.6' }}>Data storage format organizing by columns rather than rows, optimized for analytics.</p>
              </div>
            </div>
          </div>

          {/* Decision Flowchart */}
          <div
            style={{
              background: 'rgba(15, 23, 42, 0.6)',
              backdropFilter: 'blur(20px)',
              border: '1px solid rgba(71, 85, 105, 0.3)',
              borderRadius: '12px',
              padding: '32px',
              marginBottom: '24px'
            }}
          >
            <h3 style={{
              fontSize: '24px',
              fontWeight: 'bold',
              marginBottom: '8px',
              color: '#a78bfa'
            }}>
              Which Architecture Should I Use?
            </h3>
            <p style={{ color: '#94a3b8', fontSize: '14px', marginBottom: '24px' }}>
              Follow the decision tree below to find the best architecture for your requirements
            </p>

            <div style={{
              background: 'rgba(30, 41, 59, 0.6)',
              border: '1px solid rgba(71, 85, 105, 0.3)',
              borderRadius: '12px',
              padding: '32px',
              overflowX: 'auto'
            }}>
              {/* Decision Tree - Always Visible */}
              <div style={{ minWidth: '900px' }}>
                {/* Start Node */}
                <div style={{ textAlign: 'center', marginBottom: '24px' }}>
                  <div style={{
                    display: 'inline-block',
                    padding: '16px 32px',
                    background: 'linear-gradient(135deg, #a78bfa 0%, #7c3aed 100%)',
                    border: '2px solid #a78bfa',
                    borderRadius: '12px',
                    color: '#ffffff',
                    fontWeight: '600',
                    fontSize: '16px'
                  }}>
                    Start: Choose Your Architecture
                  </div>
                </div>

                {/* Arrow Down */}
                <div style={{ textAlign: 'center', marginBottom: '16px' }}>
                  <div style={{ display: 'inline-block', width: '2px', height: '30px', background: '#94a3b8' }}></div>
                </div>

                {/* Question 1: Real-time? */}
                <div style={{ textAlign: 'center', marginBottom: '24px' }}>
                  <div style={{
                    display: 'inline-block',
                    padding: '12px 24px',
                    background: 'rgba(59, 130, 246, 0.2)',
                    border: '2px solid #3b82f6',
                    borderRadius: '8px',
                    color: '#cbd5e1',
                    fontWeight: '600',
                    fontSize: '15px'
                  }}>
                    Need Real-time Processing?
                  </div>
                </div>

                {/* Branches */}
                <div style={{ display: 'flex', justifyContent: 'space-around', marginBottom: '24px', position: 'relative' }}>
                  {/* Left Branch: NO - Batch */}
                  <div style={{ flex: 1, textAlign: 'center', paddingRight: '16px' }}>
                    <div style={{ marginBottom: '16px', color: '#94a3b8', fontSize: '14px', fontWeight: '600' }}>NO</div>
                    <div style={{ display: 'inline-block', width: '2px', height: '30px', background: '#94a3b8', marginBottom: '16px' }}></div>
                    <div
                      onClick={() => {
                        setActiveArchitecture('batch');
                        setActiveView('architectures');
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                      }}
                      style={{
                        padding: '20px',
                        background: 'linear-gradient(135deg, #22c55e 0%, #059669 100%)',
                        border: '2px solid #22c55e',
                        borderRadius: '12px',
                        cursor: 'pointer',
                        transition: 'all 0.3s',
                        boxShadow: '0 4px 12px rgba(34, 197, 94, 0.3)'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#ffffff', marginBottom: '8px' }}>
                        Batch Architecture
                      </div>
                      <div style={{ fontSize: '13px', color: 'rgba(255,255,255,0.9)', marginBottom: '12px' }}>
                        Scheduled processing in intervals
                      </div>
                      <div style={{ fontSize: '12px', color: 'rgba(255,255,255,0.8)', fontStyle: 'italic' }}>
                        ETL pipelines, reporting, data warehousing
                      </div>
                    </div>
                  </div>

                  {/* Right Branch: YES - Further Questions */}
                  <div style={{ flex: 2 }}>
                    <div style={{ marginBottom: '16px', textAlign: 'center', color: '#94a3b8', fontSize: '14px', fontWeight: '600' }}>YES</div>
                    <div style={{ textAlign: 'center', marginBottom: '16px' }}>
                      <div style={{ display: 'inline-block', width: '2px', height: '30px', background: '#94a3b8' }}></div>
                    </div>

                    {/* Question 2: Batch Analytics? */}
                    <div style={{ textAlign: 'center', marginBottom: '20px' }}>
                      <div style={{
                        display: 'inline-block',
                        padding: '10px 20px',
                        background: 'rgba(59, 130, 246, 0.2)',
                        border: '2px solid #3b82f6',
                        borderRadius: '8px',
                        color: '#cbd5e1',
                        fontWeight: '600',
                        fontSize: '14px'
                      }}>
                        Also Need Batch Analytics?
                      </div>
                    </div>

                    <div style={{ display: 'flex', gap: '24px', justifyContent: 'center' }}>
                      {/* Lambda */}
                      <div style={{ flex: 1, maxWidth: '280px', textAlign: 'center' }}>
                        <div style={{ marginBottom: '12px', color: '#94a3b8', fontSize: '13px', fontWeight: '600' }}>YES</div>
                        <div style={{ display: 'inline-block', width: '2px', height: '20px', background: '#94a3b8', marginBottom: '12px' }}></div>
                        <div
                          onClick={() => {
                            setActiveArchitecture('lambda');
                            setActiveView('architectures');
                            window.scrollTo({ top: 0, behavior: 'smooth' });
                          }}
                          style={{
                            padding: '16px',
                            background: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',
                            border: '2px solid #ef4444',
                            borderRadius: '12px',
                            cursor: 'pointer',
                            transition: 'all 0.3s',
                            boxShadow: '0 4px 12px rgba(239, 68, 68, 0.3)'
                          }}
                          onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}
                          onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                        >
                          <div style={{ fontSize: '16px', fontWeight: 'bold', color: '#ffffff', marginBottom: '6px' }}>
                            Lambda
                          </div>
                          <div style={{ fontSize: '12px', color: 'rgba(255,255,255,0.9)', marginBottom: '8px' }}>
                            Batch + Stream hybrid
                          </div>
                          <div style={{ fontSize: '11px', color: 'rgba(255,255,255,0.8)', fontStyle: 'italic' }}>
                            E-commerce, fraud detection
                          </div>
                        </div>
                      </div>

                      {/* NO - Further split */}
                      <div style={{ flex: 1, maxWidth: '280px' }}>
                        <div style={{ marginBottom: '12px', textAlign: 'center', color: '#94a3b8', fontSize: '13px', fontWeight: '600' }}>NO</div>
                        <div style={{ textAlign: 'center', marginBottom: '12px' }}>
                          <div style={{ display: 'inline-block', width: '2px', height: '20px', background: '#94a3b8' }}></div>
                        </div>

                        {/* Question 3: Reprocessing? */}
                        <div style={{ textAlign: 'center', marginBottom: '16px' }}>
                          <div style={{
                            display: 'inline-block',
                            padding: '8px 16px',
                            background: 'rgba(59, 130, 246, 0.2)',
                            border: '2px solid #3b82f6',
                            borderRadius: '6px',
                            color: '#cbd5e1',
                            fontWeight: '600',
                            fontSize: '12px'
                          }}>
                            Need Reprocessing?
                          </div>
                        </div>

                        <div style={{ display: 'flex', gap: '12px' }}>
                          {/* Kappa */}
                          <div style={{ flex: 1, textAlign: 'center' }}>
                            <div style={{ marginBottom: '8px', color: '#94a3b8', fontSize: '12px', fontWeight: '600' }}>YES</div>
                            <div style={{ display: 'inline-block', width: '2px', height: '15px', background: '#94a3b8', marginBottom: '8px' }}></div>
                            <div
                              onClick={() => {
                                setActiveArchitecture('kappa');
                                setActiveView('architectures');
                                window.scrollTo({ top: 0, behavior: 'smooth' });
                              }}
                              style={{
                                padding: '14px',
                                background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',
                                border: '2px solid #3b82f6',
                                borderRadius: '10px',
                                cursor: 'pointer',
                                transition: 'all 0.3s',
                                boxShadow: '0 4px 12px rgba(59, 130, 246, 0.3)'
                              }}
                              onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}
                              onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                            >
                              <div style={{ fontSize: '14px', fontWeight: 'bold', color: '#ffffff', marginBottom: '4px' }}>
                                Kappa
                              </div>
                              <div style={{ fontSize: '11px', color: 'rgba(255,255,255,0.9)', marginBottom: '6px' }}>
                                Event log replay
                              </div>
                              <div style={{ fontSize: '10px', color: 'rgba(255,255,255,0.8)', fontStyle: 'italic' }}>
                                IoT, event-driven
                              </div>
                            </div>
                          </div>

                          {/* Streaming */}
                          <div style={{ flex: 1, textAlign: 'center' }}>
                            <div style={{ marginBottom: '8px', color: '#94a3b8', fontSize: '12px', fontWeight: '600' }}>NO</div>
                            <div style={{ display: 'inline-block', width: '2px', height: '15px', background: '#94a3b8', marginBottom: '8px' }}></div>
                            <div
                              onClick={() => {
                                setActiveArchitecture('streaming');
                                setActiveView('architectures');
                                window.scrollTo({ top: 0, behavior: 'smooth' });
                              }}
                              style={{
                                padding: '14px',
                                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                                border: '2px solid #f59e0b',
                                borderRadius: '10px',
                                cursor: 'pointer',
                                transition: 'all 0.3s',
                                boxShadow: '0 4px 12px rgba(245, 158, 11, 0.3)'
                              }}
                              onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}
                              onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                            >
                              <div style={{ fontSize: '14px', fontWeight: 'bold', color: '#ffffff', marginBottom: '4px' }}>
                                Streaming
                              </div>
                              <div style={{ fontSize: '11px', color: 'rgba(255,255,255,0.9)', marginBottom: '6px' }}>
                                Current events only
                              </div>
                              <div style={{ fontSize: '10px', color: 'rgba(255,255,255,0.8)', fontStyle: 'italic' }}>
                                Dashboards, alerts
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Legend */}
                <div style={{ marginTop: '32px', paddingTop: '24px', borderTop: '1px solid rgba(71, 85, 105, 0.3)' }}>
                  <div style={{ color: '#94a3b8', fontSize: '13px', marginBottom: '12px', fontWeight: '600' }}>
                    Click any architecture box to explore it in detail
                  </div>
                  <div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                      <div style={{ width: '16px', height: '16px', background: '#22c55e', borderRadius: '4px' }}></div>
                      <span style={{ color: '#cbd5e1', fontSize: '12px' }}>Beginner</span>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                      <div style={{ width: '16px', height: '16px', background: '#3b82f6', borderRadius: '4px' }}></div>
                      <span style={{ color: '#cbd5e1', fontSize: '12px' }}>Intermediate</span>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                      <div style={{ width: '16px', height: '16px', background: '#ef4444', borderRadius: '4px' }}></div>
                      <span style={{ color: '#cbd5e1', fontSize: '12px' }}>Advanced</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          </>
          )}
        </div>
      </div>

      {selectedComponent && (
                <div>
                  <h4 style={{ color: '#cbd5e1', fontSize: '18px', fontWeight: '600', marginBottom: '20px' }}>
                    Do you need real-time data processing?
                  </h4>
                  <p style={{ color: '#94a3b8', fontSize: '14px', marginBottom: '20px' }}>
                    Real-time processing means handling data as it arrives with sub-second to few-second latency.
                  </p>
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button
                      onClick={() => setFlowchartStep('realtime-yes')}
                <div>
                  <h4 style={{ color: '#cbd5e1', fontSize: '18px', fontWeight: '600', marginBottom: '20px' }}>
                    Do you need real-time data processing?
                  </h4>
                  <p style={{ color: '#94a3b8', fontSize: '14px', marginBottom: '20px' }}>
                    Real-time processing means handling data as it arrives with sub-second to few-second latency.
                  </p>
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button
                      onClick={() => setFlowchartStep('realtime-yes')}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      Yes, I need real-time
                    </button>
                    <button
                      onClick={() => setFlowchartStep('batch-recommend')}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      No, batch processing is fine
                    </button>
                  </div>
                </div>
              )}

              {flowchartStep === 'realtime-yes' && (
                <div>
                  <h4 style={{ color: '#cbd5e1', fontSize: '18px', fontWeight: '600', marginBottom: '20px' }}>
                    Do you also need accurate batch analytics on historical data?
                  </h4>
                  <p style={{ color: '#94a3b8', fontSize: '14px', marginBottom: '20px' }}>
                    Some systems need both: fast real-time updates AND accurate computations on complete historical datasets.
                  </p>
                  <div style={{ display: 'flex', gap: '12px', marginBottom: '16px' }}>
                    <button
                      onClick={() => setFlowchartStep('lambda-recommend')}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      Yes, I need both
                    </button>
                    <button
                      onClick={() => setFlowchartStep('streaming-only')}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      No, only real-time
                    </button>
                  </div>
                  <button
                    onClick={() => setFlowchartStep('start')}
                    style={{
                      padding: '8px 16px',
                      background: 'rgba(71, 85, 105, 0.3)',
                      border: '1px solid rgba(71, 85, 105, 0.5)',
                      borderRadius: '6px',
                      color: '#94a3b8',
                      fontSize: '13px',
                      cursor: 'pointer'
                    }}
                  >
                    Back
                  </button>
                </div>
              )}

              {flowchartStep === 'streaming-only' && (
                <div>
                  <h4 style={{ color: '#cbd5e1', fontSize: '18px', fontWeight: '600', marginBottom: '20px' }}>
                    Do you need to reprocess historical data when logic changes?
                  </h4>
                  <p style={{ color: '#94a3b8', fontSize: '14px', marginBottom: '20px' }}>
                    Kappa architecture keeps all events in an infinite log, allowing you to replay and recompute. Streaming architecture is simpler but doesn't support full reprocessing.
                  </p>
                  <div style={{ display: 'flex', gap: '12px', marginBottom: '16px' }}>
                    <button
                      onClick={() => setFlowchartStep('kappa-recommend')}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      Yes, I need reprocessing
                    </button>
                    <button
                      onClick={() => setFlowchartStep('streaming-recommend')}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      No, only current events
                    </button>
                  </div>
                  <button
                    onClick={() => setFlowchartStep('realtime-yes')}
                    style={{
                      padding: '8px 16px',
                      background: 'rgba(71, 85, 105, 0.3)',
                      border: '1px solid rgba(71, 85, 105, 0.5)',
                      borderRadius: '6px',
                      color: '#94a3b8',
                      fontSize: '13px',
                      cursor: 'pointer'
                    }}
                  >
                    Back
                  </button>
                </div>
              )}

              {flowchartStep === 'lambda-recommend' && (
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '16px' }}>
                    <Check size={32} color="#10b981" />
                    <h4 style={{ color: '#10b981', fontSize: '20px', fontWeight: 'bold' }}>
                      Recommendation: Lambda Architecture
                    </h4>
                  </div>
                  <p style={{ color: '#cbd5e1', fontSize: '15px', lineHeight: '1.7', marginBottom: '16px' }}>
                    Lambda Architecture is perfect for your needs. It provides both accurate batch analytics on complete historical data AND low-latency real-time processing. The serving layer merges both views for comprehensive insights.
                  </p>
                  <div style={{ background: 'rgba(16, 185, 129, 0.1)', border: '1px solid rgba(16, 185, 129, 0.3)', borderRadius: '8px', padding: '16px', marginBottom: '16px' }}>
                    <p style={{ color: '#94a3b8', fontSize: '13px', lineHeight: '1.6' }}>
                      <strong style={{ color: '#10b981' }}>Best for:</strong> E-commerce platforms, fraud detection, recommendation engines, social media analytics
                    </p>
                  </div>
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button
                      onClick={() => {
                        setActiveArchitecture('lambda');
                        setFlowchartStep('start');
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                      }}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      Explore Lambda Architecture
                    </button>
                    <button
                      onClick={() => setFlowchartStep('start')}
                      style={{
                        padding: '12px 24px',
                        background: 'rgba(71, 85, 105, 0.3)',
                        border: '1px solid rgba(71, 85, 105, 0.5)',
                        borderRadius: '8px',
                        color: '#94a3b8',
                        fontSize: '14px',
                        cursor: 'pointer'
                      }}
                    >
                      Start Over
                    </button>
                  </div>
                </div>
              )}

              {flowchartStep === 'kappa-recommend' && (
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '16px' }}>
                    <Check size={32} color="#10b981" />
                    <h4 style={{ color: '#10b981', fontSize: '20px', fontWeight: 'bold' }}>
                      Recommendation: Kappa Architecture
                    </h4>
                  </div>
                  <p style={{ color: '#cbd5e1', fontSize: '15px', lineHeight: '1.7', marginBottom: '16px' }}>
                    Kappa Architecture is ideal for your use case. It simplifies Lambda by using a single stream processing path with an infinite event log. You can replay historical data whenever you update your processing logic.
                  </p>
                  <div style={{ background: 'rgba(16, 185, 129, 0.1)', border: '1px solid rgba(16, 185, 129, 0.3)', borderRadius: '8px', padding: '16px', marginBottom: '16px' }}>
                    <p style={{ color: '#94a3b8', fontSize: '13px', lineHeight: '1.6' }}>
                      <strong style={{ color: '#10b981' }}>Best for:</strong> Event-driven microservices, IoT platforms, real-time analytics where you need the ability to reprocess
                    </p>
                  </div>
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button
                      onClick={() => {
                        setActiveArchitecture('kappa');
                        setFlowchartStep('start');
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                      }}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      Explore Kappa Architecture
                    </button>
                    <button
                      onClick={() => setFlowchartStep('start')}
                      style={{
                        padding: '12px 24px',
                        background: 'rgba(71, 85, 105, 0.3)',
                        border: '1px solid rgba(71, 85, 105, 0.5)',
                        borderRadius: '8px',
                        color: '#94a3b8',
                        fontSize: '14px',
                        cursor: 'pointer'
                      }}
                    >
                      Start Over
                    </button>
                  </div>
                </div>
              )}

              {flowchartStep === 'streaming-recommend' && (
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '16px' }}>
                    <Check size={32} color="#10b981" />
                    <h4 style={{ color: '#10b981', fontSize: '20px', fontWeight: 'bold' }}>
                      Recommendation: Streaming Architecture
                    </h4>
                  </div>
                  <p style={{ color: '#cbd5e1', fontSize: '15px', lineHeight: '1.7', marginBottom: '16px' }}>
                    Streaming Architecture is your best choice. It's the simplest real-time architecture, focusing on processing current events as they arrive without the complexity of maintaining infinite logs.
                  </p>
                  <div style={{ background: 'rgba(16, 185, 129, 0.1)', border: '1px solid rgba(16, 185, 129, 0.3)', borderRadius: '8px', padding: '16px', marginBottom: '16px' }}>
                    <p style={{ color: '#94a3b8', fontSize: '13px', lineHeight: '1.6' }}>
                      <strong style={{ color: '#10b981' }}>Best for:</strong> Live dashboards, monitoring systems, alerting, simple event processing
                    </p>
                  </div>
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button
                      onClick={() => {
                        setActiveArchitecture('streaming');
                        setFlowchartStep('start');
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                      }}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      Explore Streaming Architecture
                    </button>
                    <button
                      onClick={() => setFlowchartStep('start')}
                      style={{
                        padding: '12px 24px',
                        background: 'rgba(71, 85, 105, 0.3)',
                        border: '1px solid rgba(71, 85, 105, 0.5)',
                        borderRadius: '8px',
                        color: '#94a3b8',
                        fontSize: '14px',
                        cursor: 'pointer'
                      }}
                    >
                      Start Over
                    </button>
                  </div>
                </div>
              )}

              {flowchartStep === 'batch-recommend' && (
                <div>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '16px' }}>
                    <Check size={32} color="#10b981" />
                    <h4 style={{ color: '#10b981', fontSize: '20px', fontWeight: 'bold' }}>
                      Recommendation: Batch Architecture
                    </h4>
                  </div>
                  <p style={{ color: '#cbd5e1', fontSize: '15px', lineHeight: '1.7', marginBottom: '16px' }}>
                    Batch Architecture is perfect for your requirements. It's the simplest and most mature approach, processing data in scheduled intervals. Great for scenarios where real-time processing isn't necessary.
                  </p>
                  <div style={{ background: 'rgba(16, 185, 129, 0.1)', border: '1px solid rgba(16, 185, 129, 0.3)', borderRadius: '8px', padding: '16px', marginBottom: '16px' }}>
                    <p style={{ color: '#94a3b8', fontSize: '13px', lineHeight: '1.6' }}>
                      <strong style={{ color: '#10b981' }}>Best for:</strong> ETL pipelines, data warehousing, reporting, scheduled analytics, data lake processing
                    </p>
                  </div>
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button
                      onClick={() => {
                        setActiveArchitecture('batch');
                        setFlowchartStep('start');
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                      }}
                      style={{
                        flex: 1,
                        padding: '12px 24px',
                        background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        transition: 'all 0.3s'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
                    >
                      Explore Batch Architecture
                    </button>
                    <button
                      onClick={() => setFlowchartStep('start')}
                      style={{
                        padding: '12px 24px',
                        background: 'rgba(71, 85, 105, 0.3)',
                        border: '1px solid rgba(71, 85, 105, 0.5)',
                        borderRadius: '8px',
                        color: '#94a3b8',
                        fontSize: '14px',
                        cursor: 'pointer'
                      }}
                    >
                      Start Over
                    </button>
                  </div>
                </div>
              )}
            </div>
          </div>
          </>
          )}
        </div>
      </div>

      {selectedComponent && (
        <div
          onClick={() => setSelectedComponent(null)}
          style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            background: 'rgba(0, 0, 0, 0.85)',
            backdropFilter: 'blur(10px)',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            padding: '24px',
            zIndex: 1000
          }}
        >
          <div
            onClick={(e) => e.stopPropagation()}
            style={{
              background: 'rgba(15, 23, 42, 0.95)',
              backdropFilter: 'blur(20px)',
              border: '1px solid rgba(71, 85, 105, 0.5)',
              borderRadius: '16px',
              padding: '32px',
              maxWidth: '600px',
              width: '100%',
              maxHeight: '90vh',
              overflowY: 'auto'
            }}
          >
            <div style={{ display: 'flex', alignItems: 'start', gap: '16px', marginBottom: '24px' }}>
              <div
                style={{
                  background: colorScheme[selectedComponent.shape]?.bg,
                  border: `2px solid ${colorScheme[selectedComponent.shape]?.border}`,
                  borderRadius: '12px',
                  padding: '16px',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center'
                }}
              >
                {React.createElement(iconComponents[selectedComponent.shape], {
                  size: 32,
                  color: colorScheme[selectedComponent.shape]?.icon
                })}
              </div>
              <div style={{ flex: 1 }}>
                <h2 style={{ fontSize: '28px', fontWeight: 'bold', marginBottom: '4px' }}>
                  {selectedComponent.name}
                </h2>
                <p style={{ color: '#94a3b8', fontSize: '14px' }}>
                  {selectedComponent.description}
                </p>
              </div>
            </div>

            <div style={{ marginBottom: '24px' }}>
              <h3 style={{ color: '#60a5fa', fontSize: '16px', fontWeight: '600', marginBottom: '8px' }}>
                Details
              </h3>
              <p style={{ color: '#cbd5e1', fontSize: '14px', lineHeight: '1.6' }}>
                {selectedComponent.details}
              </p>
            </div>

            <div style={{ marginBottom: '24px' }}>
              <h3 style={{ color: '#a78bfa', fontSize: '16px', fontWeight: '600', marginBottom: '12px' }}>
                Technologies
              </h3>
              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                {selectedComponent.technologies.map((tech, i) => (
                  <span
                    key={i}
                    style={{
                      background: 'rgba(30, 41, 59, 0.8)',
                      border: '1px solid rgba(139, 92, 246, 0.3)',
                      borderRadius: '6px',
                      padding: '6px 12px',
                      fontSize: '13px',
                      color: '#e2e8f0',
                      fontWeight: '500'
                    }}
                  >
                    {tech}
                  </span>
                ))}
              </div>
            </div>

            {/* Code Examples Section */}
            <div style={{ marginBottom: '24px' }}>
              <h3 style={{ color: '#fbbf24', fontSize: '16px', fontWeight: '600', marginBottom: '12px' }}>
                Code Examples
              </h3>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
                {(() => {
                  const componentName = selectedComponent.name.toLowerCase();
                  const technologies = selectedComponent.technologies;
                  const examples = [];

                  // Kafka / Message Queue examples
                  if (technologies.some(t => t.includes('Kafka')) || componentName.includes('queue') || componentName.includes('message')) {
                    examples.push({
                      title: 'Kafka Producer (Python)',
                      code: `from kafka import KafkaProducer
import json

producer = KafkaProducer(
    bootstrap_servers=['localhost:9092'],
    value_serializer=lambda v: json.dumps(v).encode('utf-8')
)

# Send event to topic
event = {'user_id': 123, 'action': 'purchase', 'amount': 49.99}
producer.send('user-events', value=event)
producer.flush()`
                    });
                  }

                  // Spark / Batch Processing examples
                  if (technologies.some(t => t.includes('Spark')) || componentName.includes('batch')) {
                    examples.push({
                      title: 'Spark Batch Job (PySpark)',
                      code: `from pyspark.sql import SparkSession
from pyspark.sql.functions import col, avg, count

spark = SparkSession.builder.appName("BatchAnalytics").getOrCreate()

# Read data and aggregate
df = spark.read.parquet("s3://data-lake/events/")
daily_metrics = df.groupBy("date", "product_id") \\
    .agg(count("*").alias("views"), avg("price").alias("avg_price"))

daily_metrics.write.mode("overwrite").parquet("s3://warehouse/daily-metrics/")`
                    });
                  }

                  // Flink / Stream Processing examples
                  if (technologies.some(t => t.includes('Flink')) || technologies.some(t => t.includes('Storm')) || (componentName.includes('stream') && !componentName.includes('data'))) {
                    examples.push({
                      title: 'Flink Stream Processing (Java)',
                      code: `StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();

DataStream<Event> events = env
    .addSource(new FlinkKafkaConsumer<>("events", new EventSchema(), props))
    .keyBy(event -> event.getUserId())
    .timeWindow(Time.minutes(5))
    .aggregate(new EventAggregator());

events.addSink(new FlinkKafkaProducer<>("aggregated-events", new EventSchema(), props));
env.execute("Real-time Aggregation");`
                    });
                  }

                  // Redis / Cache examples
                  if (technologies.some(t => t.includes('Redis')) || componentName.includes('cache')) {
                    examples.push({
                      title: 'Redis Caching Pattern (Python)',
                      code: `import redis
import json

redis_client = redis.Redis(host='localhost', port=6379, decode_responses=True)

def get_user_profile(user_id):
    # Check cache first
    cached = redis_client.get(f"user:{user_id}")
    if cached:
        return json.loads(cached)

    # Fetch from database if not cached
    profile = db.query(f"SELECT * FROM users WHERE id={user_id}")
    redis_client.setex(f"user:{user_id}", 3600, json.dumps(profile))
    return profile`
                    });
                  }

                  // PostgreSQL / Database examples
                  if (technologies.some(t => t.includes('PostgreSQL')) || technologies.some(t => t.includes('MongoDB')) || componentName.includes('source')) {
                    examples.push({
                      title: 'PostgreSQL Query (Python)',
                      code: `import psycopg2

conn = psycopg2.connect(
    host="localhost",
    database="analytics",
    user="datauser",
    password="password"
)

cursor = conn.cursor()
cursor.execute("""
    SELECT date, product_id, SUM(quantity) as total_sales
    FROM orders
    WHERE date >= CURRENT_DATE - INTERVAL '30 days'
    GROUP BY date, product_id
    ORDER BY total_sales DESC
""")
results = cursor.fetchall()`
                    });
                  }

                  // Snowflake / Data Warehouse examples
                  if (technologies.some(t => t.includes('Snowflake')) || technologies.some(t => t.includes('BigQuery')) || componentName.includes('warehouse')) {
                    examples.push({
                      title: 'Snowflake Analytics Query (SQL)',
                      code: `-- Analytical query with window functions
SELECT
    user_id,
    order_date,
    total_amount,
    AVG(total_amount) OVER (
        PARTITION BY user_id
        ORDER BY order_date
        ROWS BETWEEN 6 PRECEDING AND CURRENT ROW
    ) as moving_avg_7day
FROM orders
WHERE order_date >= DATEADD(month, -6, CURRENT_DATE())
ORDER BY user_id, order_date;`
                    });
                  }

                  // API / REST examples
                  if (technologies.some(t => t.includes('REST')) || technologies.some(t => t.includes('GraphQL')) || componentName.includes('api') || componentName.includes('serving')) {
                    examples.push({
                      title: 'REST API Endpoint (Node.js)',
                      code: `const express = require('express');
const app = express();

app.get('/api/metrics/:userId', async (req, res) => {
    const { userId } = req.params;

    // Merge batch and real-time views
    const batchView = await queryWarehouse(userId);
    const realtimeView = await queryCache(userId);

    const merged = {
        ...batchView,
        recentActivity: realtimeView.events,
        lastUpdated: new Date()
    };

    res.json(merged);
});`
                    });
                  }

                  // S3 / Cloud Storage examples
                  if (technologies.some(t => t.includes('S3')) || componentName.includes('storage')) {
                    examples.push({
                      title: 'S3 Data Lake Write (Python)',
                      code: `import boto3
import pandas as pd

s3_client = boto3.client('s3')

# Write partitioned data to S3
df = pd.DataFrame(events)
partition_path = f"year={year}/month={month}/day={day}/"

df.to_parquet(
    f"s3://data-lake/events/{partition_path}/data.parquet",
    compression='snappy',
    partition_cols=['region', 'category']
)`
                    });
                  }

                  // Airflow / Orchestration examples
                  if (technologies.some(t => t.includes('Airflow')) || componentName.includes('orchestration') || componentName.includes('pipeline')) {
                    examples.push({
                      title: 'Airflow DAG (Python)',
                      code: `from airflow import DAG
from airflow.operators.python_operator import PythonOperator
from datetime import datetime, timedelta

default_args = {
    'owner': 'data-team',
    'retries': 3,
    'retry_delay': timedelta(minutes=5)
}

dag = DAG('daily_batch_job', default_args=default_args, schedule_interval='0 2 * * *')

extract = PythonOperator(task_id='extract', python_callable=extract_data, dag=dag)
transform = PythonOperator(task_id='transform', python_callable=transform_data, dag=dag)
load = PythonOperator(task_id='load', python_callable=load_to_warehouse, dag=dag)

extract >> transform >> load`
                    });
                  }

                  // Default example if no specific technology match
                  if (examples.length === 0) {
                    examples.push({
                      title: 'Component Integration Example',
                      code: `# Example integration for ${selectedComponent.name}
# Technologies: ${technologies.join(', ')}

# This component typically handles:
# - ${selectedComponent.description}
# - ${selectedComponent.details}

# Refer to official documentation for specific implementation details.`
                    });
                  }

                  return examples.map((example, idx) => (
                    <div key={idx} style={{
                      background: 'rgba(30, 41, 59, 0.6)',
                      border: '1px solid rgba(71, 85, 105, 0.3)',
                      borderRadius: '8px',
                      overflow: 'hidden'
                    }}>
                      <div style={{
                        padding: '10px 14px',
                        background: 'rgba(15, 23, 42, 0.8)',
                        borderBottom: '1px solid rgba(71, 85, 105, 0.3)',
                        color: '#fbbf24',
                        fontSize: '13px',
                        fontWeight: '600'
                      }}>
                        {example.title}
                      </div>
                      <pre style={{
                        margin: 0,
                        padding: '14px',
                        fontSize: '12px',
                        lineHeight: '1.6',
                        color: '#e2e8f0',
                        fontFamily: 'Monaco, Consolas, "Courier New", monospace',
                        overflowX: 'auto',
                        whiteSpace: 'pre-wrap',
                        wordBreak: 'break-word'
                      }}>
                        {example.code}
                      </pre>
                    </div>
                  ));
                })()}
              </div>
            </div>

            <button
              onClick={() => setSelectedComponent(null)}
              style={{
                width: '100%',
                padding: '12px',
                background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',
                border: 'none',
                borderRadius: '8px',
                color: '#ffffff',
                fontSize: '14px',
                fontWeight: '600',
                cursor: 'pointer',
                transition: 'all 0.3s'
              }}
              onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.02)'}
              onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}
            >
              Close
            </button>
          </div>
        </div>
      )}
    </div>
  );
};

export default BigDataArchitectureExplorer;
